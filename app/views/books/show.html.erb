<div class='ui text container'>

  <% if flash[:notice] %>
    <div class="ui floating message">
      <p><%= flash[:notice] %></p>
    </div>
  <% end %>

  <div class="ui divided items">
    <div class="item">
      <img class='ui bordered image' src="<%= @book.cover.preview.url %>">
      <div class="bottom aligned content">
        <div class="header"><%= @book.title %></div>
        <div class="meta">
          <span class="slug"><%= @book.slug %></span>
        </div>
        <div class="extra">
          <%= @book.intro %>
        </div>
      </div>
    </div>
  </div>

  <div class="ui horizontal form divider">
    更新图书
  </div>

  <%= form_for @book, html: {class: 'ui form'} do |f| %>
    <div class="field">
      <label>图书标题</label>
      <%= f.text_field :title, placeholder: '好的名字是基础。' %>
    </div>
    <div class="field">
      <label>图书简介</label>
      <%= f.text_area :intro, rows: '5', placeholder: '写个简介，让大家都知道为什么要读这本书。' %>
    </div>
    <div class="field">
      <label>图书封面</label>
      <%= f.file_field :cover %>
      <span class='sub text'>建议上传质量高的封面。</span>
    </div>

    <button class="ui basic button" type="submit">保存</button>
  <% end %>

  <div class="ui horizontal form divider">
    构建与预览
  </div>

  <a class="ui basic button" target='_blank' href='<%= book_builds_path(@book) %>'>构建</a>
  <a class="ui basic button" target='_blank' href='<%= @book.html_url %>'>预览</a>

  <div class="ui divider"></div>

  <a class="ui basic button" href='<%= books_path %>'>返回</a>
</div>

